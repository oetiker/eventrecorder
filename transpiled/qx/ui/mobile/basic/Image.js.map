{
  "version": 3,
  "sources": [
    "/home/travis/.nvm/versions/node/v8.15.1/lib/node_modules/qxcompiler/node_modules/qooxdoo-sdk/framework/source/class/qx/ui/mobile/basic/Image.js"
  ],
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "ui",
    "mobile",
    "core",
    "Widget",
    "construct",
    "source",
    "basic",
    "Image",
    "ROOT",
    "Init",
    "getApplication",
    "getRoot",
    "setSource",
    "initSource",
    "addListener",
    "_onChangeAppScale",
    "events",
    "loadingFailed",
    "loaded",
    "statics",
    "PIXEL_RATIOS",
    "PLACEHOLDER_IMAGE",
    "properties",
    "check",
    "nullable",
    "init",
    "apply",
    "members",
    "_getTagName",
    "_applySource",
    "value",
    "old",
    "resourceManager",
    "util",
    "ResourceManager",
    "getInstance",
    "indexOf",
    "uri",
    "toUri",
    "has",
    "highResSource",
    "_findHighResolutionSource",
    "io",
    "ImageLoader",
    "isFailed",
    "isLoaded",
    "load",
    "__loaderCallback",
    "_setSource",
    "getSource",
    "lowResImgSrc",
    "pixelRatioCandidates",
    "factor",
    "getAppScale",
    "i",
    "length",
    "hiResImgSrc",
    "k",
    "_getHighResolutionSource",
    "_createHighResolutionOverlay",
    "pixelRatio",
    "fileExtIndex",
    "lastIndexOf",
    "pixelRatioIdentifier",
    "candidate",
    "slice",
    "lowResSource",
    "_setStyle",
    "getImageWidth",
    "getImageHeight",
    "imageInfo",
    "$$disposed",
    "failed",
    "warn",
    "fireEvent",
    "aborted",
    "_domUpdated",
    "_setAttribute",
    "setDraggable",
    "isDraggable",
    "defer",
    "destruct",
    "removeListener"
  ],
  "mappings": "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",
  "file": "Image.js",
  "sourcesContent": [
    "/* ************************************************************************\n\n   qooxdoo - the new era of web development\n\n   http://qooxdoo.org\n\n   Copyright:\n     2004-2013 1&1 Internet AG, Germany, http://www.1und1.de\n\n   License:\n     MIT: https://opensource.org/licenses/MIT\n     See the LICENSE file in the project's top-level directory for details.\n\n   Authors:\n     * Tino Butz (tbtz)\n\n************************************************************************ */\n\n/**\n * The image widget displays an image file.\n *\n * *Example*\n *\n * Here is a little example of how to use the widget.\n *\n * <pre class='javascript'>\n *   var image = new qx.ui.mobile.basic.Image(\"path/to/icon.png\");\n *\n *   this.getRoot().add(image);\n * </pre>\n *\n * This example create a widget to display the image\n * <code>path/to/icon.png</code>.\n *\n */\nqx.Class.define(\"qx.ui.mobile.basic.Image\",\n{\n  extend : qx.ui.mobile.core.Widget,\n\n\n\n  /*\n  *****************************************************************************\n     CONSTRUCTOR\n  *****************************************************************************\n  */\n\n  /**\n   * @param source {String?null} The URL of the image to display.\n   */\n  construct : function(source)\n  {\n    this.base(arguments);\n\n    if (qx.ui.mobile.basic.Image.ROOT === null) {\n      qx.ui.mobile.basic.Image.ROOT = qx.core.Init.getApplication().getRoot();\n    }\n\n    if (source) {\n      this.setSource(source);\n    } else {\n      this.initSource();\n    }\n\n    qx.ui.mobile.basic.Image.ROOT.addListener(\"changeAppScale\", this._onChangeAppScale, this);\n  },\n\n\n\n  /*\n  *****************************************************************************\n     EVENTS\n  *****************************************************************************\n  */\n\n  events :\n  {\n    /**\n     * Fired if the image source can not be loaded.\n     */\n    loadingFailed : \"qx.event.type.Event\",\n\n\n    /**\n     * Fired if the image has been loaded.\n     */\n    loaded : \"qx.event.type.Event\"\n  },\n\n\n  statics :\n  {\n    /** @type {Array} Possible pixel ratios of the current device operating system */\n    PIXEL_RATIOS : null,\n\n    /** @type {qx.ui.mobile.core.Root} the mobile application root */\n    ROOT : null,\n\n\n    /** @type {String} a 1px*1px sized transparent image. */\n    PLACEHOLDER_IMAGE : null\n  },\n\n\n  /*\n  *****************************************************************************\n     PROPERTIES\n  *****************************************************************************\n  */\n\n  properties :\n  {\n    /**\n     * The URL of the image to display.\n     */\n    source :\n    {\n      check : \"String\",\n      nullable : true,\n      init : null,\n      apply : \"_applySource\"\n    }\n  },\n\n\n\n\n  /*\n  *****************************************************************************\n     MEMBERS\n  *****************************************************************************\n  */\n\n  members :\n  {\n    // overridden\n    _getTagName : function() {\n      return \"img\";\n    },\n\n\n    // property apply\n    _applySource: function(value, old) {\n      var resourceManager = qx.util.ResourceManager.getInstance();\n      var source = value;\n\n      if (source && source.indexOf('data:') != 0) {\n        var uri = resourceManager.toUri(source);\n\n        if (resourceManager.has(source)) {\n          var highResSource = this._findHighResolutionSource(source);\n          if (highResSource) {\n            source = qx.ui.mobile.basic.Image.PLACEHOLDER_IMAGE;\n            uri = resourceManager.toUri(highResSource);\n          } else {\n            source = uri;\n          }\n        }\n\n        if (!qx.io.ImageLoader.isFailed(uri) && !qx.io.ImageLoader.isLoaded(uri)) {\n          qx.io.ImageLoader.load(uri, this.__loaderCallback, this);\n        }\n      }\n\n      this._setSource(source);\n    },\n\n\n    /**\n    * Event handler for \"changeAppScale\" on application root.\n    * Reloads the image source.\n    */\n    _onChangeAppScale : function() {\n      this._applySource(this.getSource());\n    },\n\n\n    /**\n    * Detects whether there is a high-resolution image available.\n    * A high-resolution image is assumed to have the same file name as\n    * the parameter source, but with a pixelRatio identifier before the file\n    * extension, like \"@2x\".\n    * Medium Resolution: \"example.png\", high-resolution: \"example@2x.png\"\n    * If an image with a higher resolution is available, the method\n    * {@link #_createHighResolutionOverlay} is called.\n    *\n    * @param lowResImgSrc {String} source of the low resolution image.\n    * @return {String} The source of an high-resolution image source or <code>null</code>.\n    */\n    _findHighResolutionSource: function(lowResImgSrc) {\n      var pixelRatioCandidates = qx.ui.mobile.basic.Image.PIXEL_RATIOS;\n\n      // Calculate the optimal ratio, based on the rem scale factor of the application and the device pixel ratio.\n      var factor = qx.ui.mobile.basic.Image.ROOT.getAppScale();\n      if (factor <= 1) {\n        return false;\n      }\n\n      var i = pixelRatioCandidates.length;\n      while (i > 0 && factor > pixelRatioCandidates[--i]) {}\n\n      var hiResImgSrc;\n\n      // Search for best img with a higher resolution.\n      for (var k = i; k >= 0; k--) {\n        hiResImgSrc = this._getHighResolutionSource(lowResImgSrc, pixelRatioCandidates[k]);\n        if (hiResImgSrc) {\n          this._createHighResolutionOverlay(hiResImgSrc,lowResImgSrc);\n          return hiResImgSrc;\n        }\n      }\n\n      // Search for best img with a lower resolution.\n      for (var k = i + 1; k < pixelRatioCandidates.length; k++) {\n        hiResImgSrc = this._getHighResolutionSource(lowResImgSrc, pixelRatioCandidates[k]);\n        if (hiResImgSrc) {\n          this._createHighResolutionOverlay(hiResImgSrc,lowResImgSrc);\n          return hiResImgSrc;\n        }\n      }\n\n      return null;\n    },\n\n    /**\n    * Returns the source name for the high-resolution image based on the passed\n    * parameters.\n    * @param source {String} the source of the medium resolution image.\n    * @param pixelRatio {Number} the pixel ratio of the high-resolution image.\n    * @return {String} the high-resolution source name or null if no source could be found.\n    */\n    _getHighResolutionSource : function(source, pixelRatio) {\n      var fileExtIndex = source.lastIndexOf('.');\n      if (fileExtIndex > -1) {\n        var pixelRatioIdentifier = \"@\" + pixelRatio + \"x\";\n        var candidate = source.slice(0, fileExtIndex) + pixelRatioIdentifier + source.slice(fileExtIndex);\n\n        if(qx.util.ResourceManager.getInstance().has(candidate)) {\n          return candidate;\n        }\n      }\n      return null;\n    },\n\n\n    /**\n    * Creates an overlay for this image which shows the image defined by the parameter 'highResSource',\n    * but has the same size and position as the source image.\n    * The original image widget is hidden by this method.\n    *\n    * @param highResSource {String} Image source of the high-resolution image.\n    * @param lowResSource {String} Image source of the low-resolution image.\n    */\n    _createHighResolutionOverlay : function(highResSource, lowResSource) {\n      // Replace the source through transparent pixel for making the high-resolution background image visible.\n      var resourceManager = qx.util.ResourceManager.getInstance();\n      this._setStyle(\"backgroundImage\",\"url(\"+resourceManager.toUri(highResSource)+\")\");\n      this._setStyle(\"backgroundSize\",\"100%\");\n      this._setStyle(\"backgroundRepeat\",\"no-repeat\");\n      this._setStyle(\"backgroundPosition\",\"50% 50%\");\n      this._setStyle(\"width\", resourceManager.getImageWidth(lowResSource) / 16 + \"rem\");\n      this._setStyle(\"height\", resourceManager.getImageHeight(lowResSource) / 16 + \"rem\");\n    },\n\n\n    /**\n     * Event handler fired after the preloader has finished loading the icon\n     *\n     * @param source {String} Image source which was loaded\n     * @param imageInfo {Map} Dimensions of the loaded image\n     */\n    __loaderCallback : function(source, imageInfo)\n    {\n      // Ignore the callback on already disposed images\n      if (this.$$disposed === true) {\n        return;\n      }\n\n      // Output a warning if the image could not loaded and quit\n      if (imageInfo.failed)\n      {\n        this.warn(\"Image could not be loaded: \" + source);\n        this.fireEvent(\"loadingFailed\");\n      }\n      else if (imageInfo.aborted)\n      {\n        // ignore the rest because it is aborted\n        return;\n      }\n      else\n      {\n        this.fireEvent(\"loaded\");\n      }\n      this._domUpdated();\n    },\n\n\n    /**\n     * Sets the source attribute of the image tag.\n     *\n     * @param source {String} Image source which was loaded\n     */\n    _setSource : function(source)\n    {\n      this._setAttribute(\"src\", source);\n    },\n\n\n    /**\n     * Sets the attribute draggable to the given value \"isDraggable\".\n     * @param isDraggable {Boolean} target value.\n     */\n    setDraggable : function(isDraggable) {\n      if(isDraggable){\n        this._setAttribute(\"draggable\", \"true\");\n      } else {\n        this._setAttribute(\"draggable\", \"false\");\n      }\n    }\n  },\n\n\n  defer : function(statics) {\n    statics.PIXEL_RATIOS = [\"3\", \"2\", \"1.5\"];\n    statics.PLACEHOLDER_IMAGE = \"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7\";\n  },\n\n\n  destruct : function() {\n    qx.ui.mobile.basic.Image.ROOT.removeListener(\"changeAppScale\", this._onChangeAppScale, this);\n  }\n});\n"
  ]
}