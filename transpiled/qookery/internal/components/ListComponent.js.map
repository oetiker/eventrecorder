{
  "version": 3,
  "sources": [
    "/home/travis/build/cboulanger/eventrecorder/contrib/ergobyte_qookery_v0.7.0-pre/qookery/source/class/qookery/internal/components/ListComponent.js"
  ],
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "extend",
    "qookery",
    "internal",
    "components",
    "EditableComponent",
    "construct",
    "parentComponent",
    "members",
    "getAttributeType",
    "attributeName",
    "_createMainWidget",
    "list",
    "ui",
    "form",
    "List",
    "_applyAttribute",
    "addListener",
    "event",
    "_disableValueEvents",
    "selection",
    "getData",
    "getMainWidget",
    "getSelectionMode",
    "item",
    "setValue",
    "getModel",
    "value",
    "map",
    "length",
    "_applyWidgetAttributes",
    "_applyConnection",
    "modelProvider",
    "connection",
    "getAttribute",
    "undefined",
    "mapName",
    "setItems",
    "Qookery",
    "getRegistry",
    "getMap",
    "setup",
    "_updateUI",
    "resetSelection",
    "__findItem",
    "push",
    "i",
    "setSelection",
    "addItem",
    "model",
    "label",
    "icon",
    "_getLabelOf",
    "ListItem",
    "textAlign",
    "getChildControl",
    "setAllowGrowX",
    "setTextAlign",
    "add",
    "items",
    "removeAllItems",
    "data",
    "Array",
    "toArray",
    "lang",
    "Type",
    "isArray",
    "isObject",
    "Conversion",
    "toString",
    "removeAll",
    "forEach",
    "widget",
    "dispose",
    "itemNumber",
    "selectablesItems",
    "getSelectables",
    "getChildren",
    "getForm",
    "getModelProvider",
    "model2",
    "areEqual",
    "ListComponent"
  ],
  "mappings": "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",
  "file": "ListComponent.js",
  "sourcesContent": [
    "/*\n\tQookery - Declarative UI Building for Qooxdoo\n\n\tCopyright (c) Ergobyte Informatics S.A., www.ergobyte.gr\n\n\tLicensed under the Apache License, Version 2.0 (the \"License\");\n\tyou may not use this file except in compliance with the License.\n\tYou may obtain a copy of the License at\n\n\t\thttp://www.apache.org/licenses/LICENSE-2.0\n\n\tUnless required by applicable law or agreed to in writing, software\n\tdistributed under the License is distributed on an \"AS IS\" BASIS,\n\tWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n\tSee the License for the specific language governing permissions and\n\tlimitations under the License.\n*/\n\nqx.Class.define(\"qookery.internal.components.ListComponent\", {\n\n\textend: qookery.internal.components.EditableComponent,\n\n\tconstruct: function(parentComponent) {\n\t\tthis.base(arguments, parentComponent);\n\t},\n\n\tmembers: {\n\n\t\t// Metadata\n\n\t\tgetAttributeType: function(attributeName) {\n\t\t\tswitch(attributeName) {\n\t\t\tcase \"map\": return \"String\";\n\t\t\tcase \"spacing\": return \"Integer\";\n\t\t\tcase \"orientation\": return \"String\";\n\t\t\t}\n\t\t\treturn this.base(arguments, attributeName);\n\t\t},\n\n\t\t// Construction\n\n\t\t_createMainWidget: function() {\n\t\t\tvar list = new qx.ui.form.List();\n\t\t\tthis._applyAttribute(\"scrollbar-x\", list, \"scrollbarX\");\n\t\t\tthis._applyAttribute(\"scrollbar-y\", list, \"scrollbarY\");\n\t\t\tthis._applyAttribute(\"selection-mode\", list, \"selectionMode\");\n\t\t\tthis._applyAttribute(\"spacing\", list, \"spacing\");\n\t\t\tlist.addListener(\"changeSelection\", function(event) {\n\t\t\t\tif(this._disableValueEvents) return;\n\t\t\t\tvar selection = event.getData();\n\t\t\t\tswitch(this.getMainWidget().getSelectionMode()) {\n\t\t\t\tcase \"single\": case \"one\":\n\t\t\t\t\tvar item = selection[0];\n\t\t\t\t\tthis.setValue(item ? item.getModel() : null);\n\t\t\t\t\treturn;\n\t\t\t\tcase \"multi\": case \"additive\":\n\t\t\t\t\tvar value = selection.map(function(item) {\n\t\t\t\t\t\treturn item.getModel();\n\t\t\t\t\t});\n\t\t\t\t\tthis.setValue(value.length > 0 ? value : null);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}, this);\n\t\t\tthis._applyWidgetAttributes(list);\n\t\t\treturn list;\n\t\t},\n\n\t\t_applyConnection: function(modelProvider, connection) {\n\t\t\tif(this.getAttribute(\"map\") === undefined) {\n\t\t\t\tvar mapName = connection.getAttribute(\"map\");\n\t\t\t\tif(mapName != null)\n\t\t\t\t\tthis.setItems(qookery.Qookery.getRegistry().getMap(mapName));\n\t\t\t}\n\t\t\tthis.base(arguments, modelProvider, connection);\n\t\t},\n\n\t\tsetup: function() {\n\t\t\tvar mapName = this.getAttribute(\"map\");\n\t\t\tif(mapName !== undefined)\n\t\t\t\tthis.setItems(qookery.Qookery.getRegistry().getMap(mapName));\n\t\t\tthis.base(arguments);\n\t\t},\n\n\t\t_updateUI: function(value) {\n\t\t\tif(!value) {\n\t\t\t\tthis.getMainWidget().resetSelection();\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar selection = [ ];\n\t\t\tswitch(this.getMainWidget().getSelectionMode()) {\n\t\t\tcase \"single\": case \"one\":\n\t\t\t\tvar item = this.__findItem(value);\n\t\t\t\tif(item) selection.push(item);\n\t\t\t\tbreak;\n\t\t\tcase \"multi\": case \"additive\":\n\t\t\t\tfor(var i = 0; i < value.length; i++) {\n\t\t\t\t\tvar item = this.__findItem(value[i]);\n\t\t\t\t\tif(item) selection.push(item);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tif(selection.length > 0)\n\t\t\t\tthis.getMainWidget().setSelection(selection);\n\t\t\telse\n\t\t\t\tthis.getMainWidget().resetSelection();\n\t\t},\n\n\t\taddItem: function(model, label, icon) {\n\t\t\tif(!label) label = this._getLabelOf(model);\n\t\t\tvar item = new qx.ui.form.ListItem(label, icon, model);\n\t\t\tvar textAlign = this.getAttribute(\"text-align\", null);\n\t\t\tif(textAlign != null) {\n\t\t\t\titem.getChildControl(\"label\").setAllowGrowX(true);\n\t\t\t\titem.getChildControl(\"label\").setTextAlign(textAlign);\n\t\t\t}\n\t\t\tthis.getMainWidget().add(item);\n\t\t},\n\n\t\tsetItems: function(items) {\n\t\t\tthis.removeAllItems();\n\t\t\tif(items instanceof qx.data.Array) items = items.toArray();\n\t\t\tif(qx.lang.Type.isArray(items)) {\n\t\t\t\tfor(var i = 0; i < items.length; i++) {\n\t\t\t\t\tvar model = items[i];\n\t\t\t\t\tvar label = this._getLabelOf(model);\n\t\t\t\t\tthis.addItem(model, label);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if(qx.lang.Type.isObject(items)) {\n\t\t\t\tfor(var model in items) {\n\t\t\t\t\tvar label = items[model];\n\t\t\t\t\tthis.addItem(model, qx.data.Conversion.toString(label));\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tremoveAllItems: function() {\n\t\t\tthis.getMainWidget().removeAll().forEach(function(widget) { widget.dispose(); });\n\t\t},\n\n\t\tsetSelection: function(itemNumber) {\n\t\t\tvar selectablesItems = this.getMainWidget().getSelectables(true);\n\t\t\tif(!selectablesItems || selectablesItems[itemNumber] === undefined) return;\n\t\t\tthis.getMainWidget().setSelection([ selectablesItems[itemNumber] ]);\n\t\t},\n\n\t\t__findItem: function(model) {\n\t\t\tvar items = this.getMainWidget().getChildren();\n\t\t\tvar modelProvider = this.getForm().getModelProvider();\n\t\t\tfor(var i = 0; i < items.length; i++) {\n\t\t\t\tvar item = items[i];\n\t\t\t\tvar model2 = item.getModel();\n\t\t\t\tif(!modelProvider.areEqual(model, model2)) continue;\n\t\t\t\treturn item;\n\t\t\t}\n\t\t}\n\t}\n});\n"
  ]
}