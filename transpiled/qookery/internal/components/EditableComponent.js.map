{
  "version": 3,
  "sources": [
    "/home/travis/build/cboulanger/eventrecorder/contrib/ergobyte_qookery_v0.7.0-pre/qookery/source/class/qookery/internal/components/EditableComponent.js"
  ],
  "names": [
    "qx",
    "Bootstrap",
    "executePendingDefers",
    "$$dbClassInfo",
    "Class",
    "define",
    "type",
    "implement",
    "qookery",
    "IEditableComponent",
    "extend",
    "internal",
    "components",
    "Component",
    "construct",
    "parentComponent",
    "__validations",
    "properties",
    "value",
    "init",
    "inheritable",
    "nullable",
    "apply",
    "transform",
    "event",
    "label",
    "check",
    "toolTipText",
    "required",
    "readOnly",
    "format",
    "valid",
    "members",
    "_disableValueEvents",
    "__requiredValidation",
    "__connection",
    "getAttributeType",
    "attributeName",
    "create",
    "attributes",
    "_applyAttribute",
    "liveValidate",
    "getAttribute",
    "addListener",
    "validate",
    "getForm",
    "_createWidgets",
    "mainWidget",
    "_createMainWidget",
    "ui",
    "basic",
    "Label",
    "_setupLabelAppearance",
    "Error",
    "setup",
    "connectionSpecification",
    "connect",
    "initializeClientCode",
    "initialValue",
    "executeClientCode",
    "lang",
    "String",
    "setValue",
    "listWidgets",
    "filterName",
    "_widgets",
    "labelWidget",
    "getEditableWidget",
    "getMainWidget",
    "getLabelWidget",
    "disconnect",
    "modelProvider",
    "getModelProvider",
    "connection",
    "connectComponent",
    "_applyConnection",
    "removeConnection",
    "updateUI",
    "isDisposed",
    "undefined",
    "getValue",
    "_updateUI",
    "e",
    "getLabel",
    "connectionLabel",
    "setLabel",
    "getFormat",
    "formatSpecification",
    "setFormat",
    "Qookery",
    "getRegistry",
    "createFormat",
    "getToolTipText",
    "setToolTipText",
    "addValidation",
    "validatorType",
    "invalidMessage",
    "options",
    "validator",
    "getValidator",
    "validation",
    "createValidation",
    "push",
    "removeValidation",
    "Array",
    "remove",
    "removeAllValidations",
    "length",
    "setInvalidMessage",
    "widget",
    "debug",
    "getEnabled",
    "errors",
    "_runValidations",
    "_applyValidationErrors",
    "i",
    "error",
    "call",
    "core",
    "ValidationError",
    "message",
    "BaseError",
    "DEFAULTMESSAGE",
    "getComment",
    "util",
    "setValid",
    "componentLabel",
    "tr",
    "getFormattedMessage",
    "_applyValid",
    "_applyFormat",
    "_applyValue",
    "model",
    "getModel",
    "setModelValue",
    "_applyLabel",
    "_applyToolTipText",
    "_applyRequired",
    "addState",
    "removeState",
    "_applyReadOnly",
    "_transformValue",
    "_transformFormat",
    "Type",
    "isString",
    "_getLabelOf",
    "labelType",
    "data",
    "Conversion",
    "toString",
    "currentWidth",
    "getWidth",
    "setMinWidth",
    "setAllowStretchX",
    "setAllowStretchY",
    "setAlignX",
    "setAlignY",
    "_setValueSilently",
    "destruct",
    "EditableComponent"
  ],
  "mappings": "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",
  "file": "EditableComponent.js",
  "sourcesContent": [
    "/*\n\tQookery - Declarative UI Building for Qooxdoo\n\n\tCopyright (c) Ergobyte Informatics S.A., www.ergobyte.gr\n\n\tLicensed under the Apache License, Version 2.0 (the \"License\");\n\tyou may not use this file except in compliance with the License.\n\tYou may obtain a copy of the License at\n\n\t\thttp://www.apache.org/licenses/LICENSE-2.0\n\n\tUnless required by applicable law or agreed to in writing, software\n\tdistributed under the License is distributed on an \"AS IS\" BASIS,\n\tWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n\tSee the License for the specific language governing permissions and\n\tlimitations under the License.\n*/\n\n/**\n * Extend this class if you want to create a new component that bind a value.\n */\nqx.Class.define(\"qookery.internal.components.EditableComponent\", {\n\n\ttype: \"abstract\",\n\timplement: [ qookery.IEditableComponent ],\n\textend: qookery.internal.components.Component,\n\n\tconstruct: function(parentComponent) {\n\t\tthis.base(arguments, parentComponent);\n\t\tthis.__validations = [ ];\n\t},\n\n\tproperties: {\n\t\tvalue: { init: null, inheritable: true, nullable: true, apply: \"_applyValue\", transform: \"_transformValue\", event: \"changeValue\" },\n\t\tlabel: { check: \"String\", inheritable: true, nullable: true, apply: \"_applyLabel\" },\n\t\ttoolTipText: { check: \"String\", inheritable: true, nullable: true, apply: \"_applyToolTipText\" },\n\t\trequired: { check: \"Boolean\", inheritable: true, nullable: false, init: false, apply: \"_applyRequired\" },\n\t\treadOnly: { check: \"Boolean\", inheritable: true, nullable: false, init: false, apply: \"_applyReadOnly\" },\n\t\tformat: { check: \"qx.util.format.IFormat\", inheritable: true, nullable: true, init: null, apply: \"_applyFormat\", transform: \"_transformFormat\" },\n\t\tvalid: { check: \"Boolean\", nullable: false, apply: \"_applyValid\" }\n\t},\n\n\tmembers: {\n\n\t\t_disableValueEvents: false,\n\t\t__validations: null,\n\t\t__requiredValidation: null,\n\t\t__connection: null,\n\n\t\t// Metadata\n\n\t\tgetAttributeType: function(attributeName) {\n\t\t\tswitch(attributeName) {\n\t\t\tcase \"create-label\": return \"Boolean\";\n\t\t\tdefault: return this.base(arguments, attributeName);\n\t\t\t}\n\t\t},\n\n\t\t// Initialization\n\n\t\tcreate: function(attributes) {\n\t\t\tthis.base(arguments, attributes);\n\t\t\tthis._applyAttribute(\"required\", this, \"required\", false);\n\t\t\tthis._applyAttribute(\"read-only\", this, \"readOnly\", false);\n\t\t\tthis._applyAttribute(\"format\", this, \"format\");\n\t\t\tthis._applyAttribute(\"label\", this, \"label\");\n\t\t\tvar liveValidate = this.getAttribute(\"live-validate\", \"false\");\n\t\t\tswitch(liveValidate) {\n\t\t\tcase \"component\":\n\t\t\t\tthis.addListener(\"changeValue\", function() {\n\t\t\t\t\tthis.validate();\n\t\t\t\t}, this);\n\t\t\t\tbreak;\n\t\t\tcase \"form\":\n\t\t\t\tthis.addListener(\"changeValue\", function() {\n\t\t\t\t\tthis.getForm().validate();\n\t\t\t\t}, this);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t},\n\n\t\t_createWidgets: function() {\n\t\t\tvar mainWidget = this._createMainWidget();\n\t\t\tif(this.getAttribute(\"create-label\", true)) {\n\t\t\t\tvar label = new qx.ui.basic.Label();\n\t\t\t\tthis._setupLabelAppearance(label);\n\t\t\t\treturn [ mainWidget, label ];\n\t\t\t}\n\t\t\treturn [ mainWidget ];\n\t\t},\n\n\t\t_createMainWidget: function() {\n\t\t\tthrow new Error(\"Override _createMainWidget() to provide implementation specific code\");\n\t\t},\n\n\t\tsetup: function() {\n\t\t\tvar connectionSpecification = this.getAttribute(\"connect\");\n\t\t\tif(connectionSpecification != null) {\n\t\t\t\tthis.connect(connectionSpecification);\n\t\t\t}\n\t\t\tvar initializeClientCode = this.getAttribute(\"initialize\");\n\t\t\tif(initializeClientCode) {\n\t\t\t\tvar initialValue = this.executeClientCode(qx.lang.String.format(\"return (%1);\", [ initializeClientCode ]));\n\t\t\t\tthis.setValue(initialValue);\n\t\t\t}\n\t\t\treturn this.base(arguments);\n\t\t},\n\n\t\t// Widget access\n\n\t\tlistWidgets: function(filterName) {\n\t\t\tvar mainWidget = this._widgets[0];\n\t\t\tif(filterName == \"main\") return [ mainWidget ];\n\t\t\tvar labelWidget = this._widgets[1];\n\t\t\tif(!labelWidget) return [ mainWidget ];\n\t\t\t// Reverse order of main and label widget since\n\t\t\t// we want to present the label in front of the editor\n\t\t\treturn [ labelWidget, mainWidget ];\n\t\t},\n\n\t\tgetEditableWidget: function() {\n\t\t\treturn this.getMainWidget();\n\t\t},\n\n\t\tgetLabelWidget: function() {\n\t\t\treturn this._widgets[1];\n\t\t},\n\n\t\t// Model connection and UI\n\n\t\tconnect: function(connectionSpecification) {\n\t\t\tthis.disconnect();\n\t\t\tvar modelProvider = this.getForm().getModelProvider();\n\t\t\tif(modelProvider == null)\n\t\t\t\tthrow new Error(\"Install a model provider to handle connections in XML forms\");\n\t\t\tvar connection = modelProvider.connectComponent(this, connectionSpecification);\n\t\t\tif(connection == null)\n\t\t\t\tthrow new Error(\"Model provider failed to provide a connection\");\n\t\t\tthis._applyConnection(modelProvider, connection);\n\t\t\tthis.__connection = connection;\n\t\t},\n\n\t\tdisconnect: function() {\n\t\t\tif(this.__connection == null) return;\n\t\t\tthis.getForm().removeConnection(this.__connection);\n\t\t\tthis.__connection = null;\n\t\t},\n\n\t\tupdateUI: function(value) {\n\t\t\tif(this._disableValueEvents || this.isDisposed()) return false;\n\t\t\tif(value === undefined) value = this.getValue();\n\t\t\tthis._disableValueEvents = true;\n\t\t\ttry {\n\t\t\t\tthis._updateUI(value);\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tcatch(e) {\n\t\t\t\tthrow e;\n\t\t\t}\n\t\t\tfinally {\n\t\t\t\tthis._disableValueEvents = false;\n\t\t\t}\n\t\t},\n\n\t\t_applyConnection: function(modelProvider, connection) {\n\t\t\t// Subclasses may extend or override below functionality to support more attributes\n\t\t\tif(this.getLabel() == null) {\n\t\t\t\tvar connectionLabel = connection.getAttribute(\"label\");\n\t\t\t\tif(connectionLabel != null)\n\t\t\t\t\tthis.setLabel(connectionLabel);\n\t\t\t}\n\t\t\tif(this.getFormat() == null) {\n\t\t\t\tvar formatSpecification = connection.getAttribute(\"format\");\n\t\t\t\tif(formatSpecification != null)\n\t\t\t\t\tthis.setFormat(qookery.Qookery.getRegistry().createFormat(formatSpecification));\n\t\t\t}\n\t\t\tif(this.getToolTipText() == null) {\n\t\t\t\tvar toolTipText = connection.getAttribute(\"tool-tip-text\");\n\t\t\t\tif(toolTipText != null)\n\t\t\t\t\tthis.setToolTipText(toolTipText);\n\t\t\t}\n\t\t},\n\n\t\t_updateUI: function(value) {\n\t\t\t// Override to update UI according to new value\n\t\t},\n\n\t\t// Validation\n\n\t\taddValidation: function(validatorType, invalidMessage, options) {\n\t\t\tvar validator = qookery.Qookery.getRegistry().getValidator(validatorType);\n\t\t\tif(!validator) throw new Error(qx.lang.String.format(\"Validator %1 not found\", [ validatorType ]));\n\t\t\tif(!options) options = { };\n\t\t\tvar validation = validator.createValidation(this, invalidMessage, options);\n\t\t\tthis.__validations.push(validation);\n\t\t\treturn validation;\n\t\t},\n\n\t\tremoveValidation: function(validation) {\n\t\t\tqx.lang.Array.remove(this.__validations, validation);\n\t\t},\n\n\t\tremoveAllValidations: function() {\n\t\t\tthis.__validations.length = 0;\n\t\t},\n\n\t\tsetInvalidMessage: function(invalidMessage) {\n\t\t\tvar widget = this.getEditableWidget();\n\t\t\tif(typeof widget.setInvalidMessage !== \"function\") {\n\t\t\t\tthis.debug(\"Unable to set property 'invalidMessage' of broken editable component\");\n\t\t\t\treturn;\n\t\t\t}\n\t\t\twidget.setInvalidMessage(invalidMessage);\n\t\t},\n\n\t\tvalidate: function() {\n\t\t\tif(!this.getEnabled()) return null;\n\t\t\tvar errors = this._runValidations();\n\t\t\treturn this._applyValidationErrors(errors);\n\t\t},\n\n\t\t/**\n\t\t * Call all installed validations and return possibly empty array of discovered errors\n\t\t */\n\t\t_runValidations: function() {\n\t\t\tvar errors = [ ];\n\t\t\tfor(var i = 0; i < this.__validations.length; i++) {\n\t\t\t\tvar validation = this.__validations[i];\n\t\t\t\tvar error = null;\n\t\t\t\ttry {\n\t\t\t\t\tvar value = this.getValue();\n\t\t\t\t\terror = validation.call(this, value);\n\t\t\t\t}\n\t\t\t\tcatch(e) {\n\t\t\t\t\tif(!(e instanceof qx.core.ValidationError)) throw e; // Rethrow unknown exception\n\t\t\t\t\tvar message = (e.message && e.message != qx.type.BaseError.DEFAULTMESSAGE) ? e.message : e.getComment();\n\t\t\t\t\terror = new qookery.util.ValidationError(this, message);\n\t\t\t\t}\n\t\t\t\tif(error == null) continue;\n\t\t\t\terrors.push(error);\n\t\t\t}\n\t\t\treturn errors;\n\t\t},\n\n\t\t/**\n\t\t * Update component state according to (possibly empty) array of validation errors\n\t\t *\n\t\t * @return {qookery.util.ValidationError} merged validation error or <code>null</code> if no errors passed\n\t\t */\n\t\t_applyValidationErrors: function(errors) {\n\t\t\tif(errors == null || errors.length === 0) {\n\t\t\t\tthis.setValid(true);\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tvar componentLabel = this.getLabel() || \"\";\n\t\t\t\tvar message = this.tr(\"qookery.internal.components.EditableComponent.componentError\", componentLabel);\n\t\t\t\tvar error = new qookery.util.ValidationError(this, message, errors);\n\t\t\t\tthis.setValid(false);\n\t\t\t\tthis.setInvalidMessage(error.getFormattedMessage());\n\t\t\t\treturn error;\n\t\t\t}\n\t\t},\n\n\t\t// Apply methods\n\n\t\t_applyValid: function(value) {\n\t\t\tvar widget = this.getEditableWidget();\n\t\t\tif(typeof widget.setValid !== \"function\") {\n\t\t\t\tthis.debug(\"Unable to apply property 'valid' of broken editable component\");\n\t\t\t\treturn;\n\t\t\t}\n\t\t\twidget.setValid(value);\n\t\t},\n\n\t\t_applyFormat: function(format) {\n\t\t\t// Override to handle formats\n\t\t},\n\n\t\t_applyValue: function(value) {\n\t\t\tif(this.__connection != null) {\n\t\t\t\tvar model = this.getForm().getModel();\n\t\t\t\tif(model != null)\n\t\t\t\t\tthis.__connection.setModelValue(model, value);\n\t\t\t}\n\t\t\tthis.updateUI(value);\n\t\t},\n\n\t\t_applyLabel: function(label) {\n\t\t\tvar labelWidget = this.getLabelWidget();\n\t\t\tif(!labelWidget) return;\n\t\t\tlabelWidget.setValue(label);\n\t\t},\n\n\t\t_applyToolTipText: function(toolTipText) {\n\t\t\tvar mainWidget = this.getMainWidget();\n\t\t\tif(!mainWidget) return;\n\t\t\tmainWidget.setToolTipText(toolTipText);\n\t\t},\n\n\t\t_applyRequired: function(required) {\n\t\t\tvar labelWidget = this.getLabelWidget();\n\t\t\tif(required && !this.__requiredValidation) {\n\t\t\t\tthis.__requiredValidation = this.addValidation(\"notNull\");\n\t\t\t\tif(labelWidget) labelWidget.addState(\"required\");\n\t\t\t}\n\t\t\tif(!required && this.__requiredValidation) {\n\t\t\t\tthis.removeValidation(this.__requiredValidation);\n\t\t\t\tthis.__requiredValidation = null;\n\t\t\t\tif(labelWidget) labelWidget.removeState(\"required\");\n\t\t\t}\n\t\t},\n\n\t\t_applyReadOnly: function(readOnly) {\n\t\t\t// Subclasses should extend this method to implement the read only property\n\t\t\tvar labelWidget = this.getLabelWidget();\n\t\t\tif(labelWidget) {\n\t\t\t\tif(readOnly) labelWidget.addState(\"readOnly\"); else labelWidget.removeState(\"readOnly\");\n\t\t\t}\n\t\t},\n\n\t\t// Transform methods\n\n\t\t_transformValue: function(value) {\n\t\t\t// Override to transform value\n\t\t\treturn value;\n\t\t},\n\n\t\t_transformFormat: function(value) {\n\t\t\tif(qx.lang.Type.isString(value)) {\n\t\t\t\treturn qookery.Qookery.getRegistry().createFormat(value);\n\t\t\t}\n\t\t\treturn value;\n\t\t},\n\n\t\t// Utility methods for subclasses\n\n\t\t/**\n\t\t * Ask model provider to return a human friendly label for value\n\t\t *\n\t\t * @param value {any} the value for which a label is needed\n\t\t * @param labelType {String?} optional symbolic name of needed label type\n\t\t *\n\t\t * @return {String} produced label for user interface needs\n\t\t */\n\t\t_getLabelOf: function(value, labelType) {\n\t\t\tif(value == null) return \"\";\n\t\t\tvar format = this.getFormat();\n\t\t\tif(format != null)\n\t\t\t\treturn format.format(value);\n\t\t\tvar modelProvider = this.getForm().getModelProvider();\n\t\t\tif(modelProvider != null)\n\t\t\t\treturn modelProvider.getLabel(value, labelType);\n\t\t\treturn qx.data.Conversion.toString(value);\n\t\t},\n\n\t\t/**\n\t\t * Perform all operation about align, width and height for a label\n\t\t *\n\t\t * @param widget {qx.ui.basic.Label} label widget\n\t\t */\n\t\t_setupLabelAppearance: function(labelWidget) {\n\t\t\tvar currentWidth = labelWidget.getWidth();\n\t\t\tlabelWidget.setMinWidth(currentWidth);\n\t\t\tlabelWidget.setAllowStretchX(false);\n\t\t\tlabelWidget.setAllowStretchY(false);\n\t\t\tlabelWidget.setAlignX(\"left\");\n\t\t\tlabelWidget.setAlignY(\"middle\");\n\t\t},\n\n\t\t_setValueSilently: function(value) {\n\t\t\tthis._disableValueEvents = true;\n\t\t\ttry {\n\t\t\t\tthis.setValue(value);\n\t\t\t}\n\t\t\tcatch(e) {\n\t\t\t\tthrow e;\n\t\t\t}\n\t\t\tfinally {\n\t\t\t\tthis._disableValueEvents = false;\n\t\t\t}\n\t\t}\n\t},\n\n\tdestruct: function() {\n\t\tthis.disconnect();\n\t}\n});\n"
  ]
}